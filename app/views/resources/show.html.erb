<p id="notice"><%= notice %></p>
<% title = @resource.relationships.prefLabels_for_this_locale.first.object.literal %>
<% if @resource.archetype.name == 'ConceptScheme' %>
  <%= title %>
<% elsif @resource.archetype.name == 'Domain' %>
  <% cs_title = @resource.relationships.resourceGroup('inScheme')
        .first.object.relationships.prefLabels_for_this_locale
        .first.object.literal %>
  <%= cs_title %> / <%= @resource.literal + " - " + title %>
<% elsif @resource.archetype.name == 'MicroThesaurus' %>
  <% domain_title = @resource.relationships.resourceGroup('domain')
                    .first.object.relationships.prefLabels_for_this_locale
                    .first.object.literal %>
  <% cs_title = @resource.relationships.resourceGroup('domain')
                .first.object.relationships.resourceGroup('inScheme')
                .first.object.relationships.prefLabels_for_this_locale.first.object.literal %>
  <%= cs_title %> / <%= @resource.relationships.resourceGroup('domain').first.object.literal + " - " + domain_title %> / <%= @resource.literal + " - " + title %>
<% else %>
  <% domain_title = @resource.relationships.resourceGroup('domain')
                    .first.object.relationships.prefLabels_for_this_locale.first.object.literal %>
  <% mt_title = @resource.relationships.resourceGroup('microthesaurus')
                .first.object.relationships.prefLabels_for_this_locale.first.object.literal %>
  <% cs_title = @resource.relationships.resourceGroup('domain')
                .first.object.relationships.resourceGroup('inScheme')
                .first.object.relationships.prefLabels_for_this_locale.first.object.literal %>
  <%= cs_title %> / <%= domain_title %> / <%= mt_title %> / <%= title %>
<% end %>
[<%= link_to 'JSON', '/c/' + @resource.literal + '.json' %>]<hr>
<% @resource.relationships.resourceGroup('prefLabel').each do |relationship| %>
  [<%= relationship.predicate.namespace.name + ":" + relationship.predicate.name %>]
  <%= link_to relationship.object.literal, '/c/' + @resource.literal + "?locale=#{relationship.object.language.name}" %>
  [<%= relationship.object.language.name %>]<br>
<% end %>
<% @resource.relationships.resourceGroup('scopeNote').each do |relationship| %>
  [<%= relationship.predicate.namespace.name + ":" + relationship.predicate.name %>]
  <%= relationship.object.literal %>
  [<%= relationship.object.language.name %>]<br>
<% end %>
<% ['broader', 'narrower', 'related', 'domain', 'microthesaurus', 'hasTopConcept'].each do |rg| %>
  <% unless @resource.literal == '00' %>
    <% tc_array = Array.new %>
    <% @resource.relationships.resourceGroup(rg).each do |relationship| %>
      <% label = '' %>
      <% if relationship.object.literal !~ /^T/ %>
        <% label = relationship.object.literal + " - " %>
      <% end %>
      <% tc_array << {  :predicate => relationship.predicate.namespace.name + ":" + relationship.predicate.name, 
                      :label => label + relationship.object.relationships.prefLabels_for_this_locale.first.object.literal, 
                      :uri => '/c/' + relationship.object.literal + "?locale=#{I18n.locale}" }%>
    <% end %>
    <% if tc_array.size > 0 %>
      <% sorted = tc_array.sort_by { |t| t[:label] } %>
      <% sorted.each do |t| %>
        [<%= t[:predicate] %>] <%= link_to t[:label], t[:uri] %><br>
      <% end %>
    <% end %>
  <% end %>
<% end %>

<%= link_to 'Edit', edit_resource_path(@resource.literal) %> |
<%= link_to 'Back', resources_path %>